(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{124:function(e,t){},131:function(e,t){},248:function(e,t,n){e.exports=n(734)},253:function(e,t,n){},254:function(e,t,n){},734:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(25),c=n.n(r),l=(n(253),n(254),n(22)),i=n(798),s=(n(73),n(791)),u=n(792),g=n(84),d=n(96),m=new(n(225).a),f="signedIn",p=Object(l.a)({Auth:d.a,cognito:{authState:void 0,updateAuthState:function(e){p.cognito.loggedIn=e===f,p.cognito.authState=e},config:{userPoolId:"",clientId:"",identityPoolId:"",region:""},checkConfigIsComplete:function(){p.cognito.config.userPoolId&&p.cognito.config.clientId&&p.cognito.config.identityPoolId&&p.cognito.config.region?(console.log("Cognito config is complete."),p.cognito.configIsComplete=!0,p.configureAuth()):(console.log("Cognito config is not complete."),p.cognito.configIsComplete=!1,p.cognito.configErrorMessage="Cognito configuration is incomplete.")},configIsComplete:!1,configErrorMessage:null,loggedIn:!1,username:"",password:"",accessToken:{},loadedCookies:!1},loadStateFromCookies:function(){if(!p.loadedCookies){var e=m.getAll();console.log("Loaded cookies:",e),p.cognito.username=e.username||"",p.cognito.config.userPoolId=e.userPoolId||"",p.cognito.config.clientId=e.clientId||"",p.cognito.config.identityPoolId=e.identityPoolId||"",p.cognito.config.region=e.region||"",p.loadedCookies=!0,p.cognito.checkConfigIsComplete()}},saveStateToCookies:function(){m.set("userPoolId",p.cognito.config.userPoolId),m.set("clientId",p.cognito.config.clientId),m.set("identityPoolId",p.cognito.config.identityPoolId),m.set("region",p.cognito.config.region),console.log("Saved config to cookies:",p.cognito.config)},configureAuth:function(){try{d.b.configure({Auth:{identityPoolId:p.cognito.config.identityPoolId,region:p.cognito.config.region,userPoolId:p.cognito.config.userPoolId,userPoolWebClientId:p.cognito.config.clientId,mandatorySignIn:!0,authenticationFlowType:"USER_SRP_AUTH"}}),console.log("Successfully configured Amplify Auth."),p.cognito.configErrorMessage=null}catch(e){console.log("Failed to configure Amplify Auth: ".concat(e)),p.cognito.configErrorMessage=e.message,p.cognito.configIsComplete=!1}}});p.loadStateFromCookies();var b=p,h=n(778),E=Object(h.a)((function(e){return{root:{display:"flex"},title:{flexGrow:1},appBarHeader:{zIndex:e.zIndex.drawer+1},footer:{textAlign:"center"},drawer:{width:250,flexShrink:0},drawerHeaderContainer:{textAlign:"center"},drawerPaper:{width:250},drawerContainer:{overflow:"auto"},content:{flexGrow:1,padding:e.spacing(1)},widgetContainer:{p:4}}})),v=n(29),C=n(782),I=n(802),y=n(780),O=n(783),j=n(790),w=n(785),S=n(786),k=n(784),P=Object(l.b)((function(){var e=Object(a.useState)(!1),t=Object(v.a)(e,2),n=t[0],r=t[1],c=function(){r(!n)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(y.a,{item:!0},o.a.createElement(C.a,{onClick:c,color:"primary",variant:"contained"},"Configure Cognito")),o.a.createElement(x,{showDialog:n,toggleDialog:c}))})),x=Object(l.b)((function(e){var t=e.showDialog,n=e.toggleDialog,r=Object(a.useState)(b.cognito.config),c=Object(v.a)(r,2),l=c[0],i=c[1];function s(e,t){var n=Object.assign({},l);n[e]=t,i(n)}function u(){i(b.cognito.config),g()}function g(){n()}return o.a.createElement(O.a,{open:t,onClose:u,"aria-labelledby":"form-dialog-title"},o.a.createElement(k.a,{id:"form-dialog-title"},"Cognito Configuration"),o.a.createElement(w.a,null,o.a.createElement(S.a,null,"In order to log in to your Cognito User Pool, please enter the required information below:"),o.a.createElement(I.a,{autoFocus:!0,margin:"dense",id:"userPoolId",label:"Cognito User Pool ID",onChange:function(e){return s("userPoolId",e.target.value)},value:l.userPoolId,fullWidth:!0}),o.a.createElement(I.a,{margin:"dense",id:"clientId",label:"Cognito Client ID",onChange:function(e){return s("clientId",e.target.value)},value:l.clientId,fullWidth:!0}),o.a.createElement(I.a,{margin:"dense",id:"identityPoolId",label:"Cognito Identity Pool ID",fullWidth:!0,onChange:function(e){return s("identityPoolId",e.target.value)},value:l.identityPoolId}),o.a.createElement(I.a,{margin:"dense",id:"region",label:"Cognito AWS Region",fullWidth:!0,onChange:function(e){return s("region",e.target.value)},value:l.region})),o.a.createElement(j.a,null,o.a.createElement(C.a,{onClick:u,color:"primary"},"Cancel"),o.a.createElement(C.a,{onClick:function(){b.cognito.config=l,b.saveStateToCookies(),console.log("Wrote cognito config to appStore:",l),b.cognito.checkConfigIsComplete(),g()},color:"primary"},"Save")))})),A=P,N=Object(l.b)((function(){return o.a.createElement("div",null,o.a.createElement(C.a,{variant:"contained",color:"primary",onClick:function(){try{b.Auth.signOut()}catch(e){console.log("error signing out: ",e)}}},"Sign Out"))})),L=Object(l.b)((function(){var e=b.cognito.loggedIn,t=E();return o.a.createElement(s.a,{position:"fixed",className:t.appBarHeader},o.a.createElement(u.a,null,o.a.createElement(g.a,{variant:"h6",className:t.title},"Amazon Cognito UI Tool"),e?o.a.createElement(N,null):o.a.createElement(A,null)))})),F=n(115),W=n(803),T=n(789),R=n(797),D=n(799),M=n(793),B=n(738),H=n(795),U=n(796),J=n(801);var z=function(){var e=E();return o.a.createElement(M.a,{className:e.footer},o.a.createElement(D.a,null,"These works are solely my own and not those of my employer.",o.a.createElement("br",null),"Copyright \xa9 Mat Werber"))},G=n(116),X=Object(l.b)((function(e){var t=e.updateAuthState;return o.a.createElement(G.a,{hide:[G.c,G.b],onStateChange:function(e){t(e)}})})),_={awsCliFunctionName:"aws-cli-lambda-proxy-AwsCliProxyFunction-12BRX5NGRPX65"},q=n(223),$=n.n(q),K=Object(l.b)((function(e){var t=e.jsonObject,n=e.collapseStringsAfterLength;return o.a.createElement($.a,{theme:"twilight",collapseStringsAfterLength:n||30,collapsed:1,style:{textAlign:"left"},src:t})})),Q=n(229),V=Object(l.b)((function(e){var t=e.children;return o.a.createElement(M.a,null,o.a.createElement(Q.a,{elevation:3},o.a.createElement(D.a,{p:2,m:1},t)))})),Y=Object(l.b)((function(){return d.a.currentCredentials().then((function(e){b.cognito.currentCredentials=e})),o.a.createElement(V,null,o.a.createElement("h2",null,"Authentication Info"),o.a.createElement(K,{jsonObject:b.cognito.currentCredentials}))})),Z=n(59),ee=n.n(Z),te=n(76),ne=n(139),ae=n.n(ne),oe=n(794),re=n(800),ce=Object(l.b)((function(e){var t=e.value,n=e.setFunction,a=["ap-south-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-southeast-1","ap-southeast-2","eu-north-1","eu-west-1","eu-west-2","eu-west-3","eu-central-1","us-west-1","us-west-2","us-east-1","us-east-2","us-central-1","sa-east-1","ca-central-1"].map((function(e){return o.a.createElement(oe.a,{key:e,value:e},e)}));return o.a.createElement(re.a,{value:t,onChange:function(e){n(e.target.value)}},a)})),le=function(){var e=Object(a.useState)(!0),t=Object(v.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),l=Object(v.a)(c,2),i=l[0],s=l[1],u=Object(a.useState)(),g=Object(v.a)(u,2),d=g[0],m=g[1],f=Object(a.useState)({Reservations:[]}),p=Object(v.a)(f,2),h=p[0],E=p[1],C=Object(a.useState)("us-east-2"),I=Object(v.a)(C,2),y=I[0],O=I[1];return Object(a.useEffect)((function(){function e(){return(e=Object(te.a)(ee.a.mark((function e(){var t,n,a,o,c;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,b.Auth.currentCredentials();case 4:t=e.sent,n=new ae.a({region:y,credentials:b.Auth.essentialCredentials(t)}),a=[],o={};case 8:return e.next=10,n.describeInstances(o).promise();case 10:c=e.sent,a=a.concat(c.Reservations),o.NextToken=c.NextToken||null;case 13:if(o.NextToken){e.next=8;break}case 14:E({Reservations:a}),r(!1),e.next=24;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0,e.t0.stack),m("".concat(e.t0)),s(!0),r(!1);case 24:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[y]),o.a.createElement(V,null,o.a.createElement("h2",null,"EC2 Instances:"),o.a.createElement(ce,{value:y,setFunction:O}),o.a.createElement("br",null),i?d:n?"Loading EC2 instances...":o.a.createElement(K,{jsonObject:h,collapseStringsAfterLength:50}))},ie=n(140),se=n.n(ie),ue=function(e){var t=e.params,n=Object(a.useState)(!1),r=Object(v.a)(n,2),c=r[0],l=r[1],i=Object(a.useState)(!1),s=Object(v.a)(i,2),u=s[0],g=s[1],d=Object(a.useState)(void 0),m=Object(v.a)(d,2),f=m[0],p=m[1],h=Object(a.useState)(!1),E=Object(v.a)(h,2),y=E[0],O=E[1],j=Object(a.useState)("us-west-2"),w=Object(v.a)(j,1)[0],S=Object(a.useState)("aws s3api list-buckets"),k=Object(v.a)(S,2),P=k[0],x=k[1],A=Object(a.useState)(void 0),N=Object(v.a)(A,2),L=N[0],F=N[1],W=t.functionName;function T(){return(T=Object(te.a)(ee.a.mark((function e(){var t,n,a,o,r;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.Auth.currentCredentials();case 2:t=e.sent,n=b.Auth.essentialCredentials(t),a=new se.a({region:w,credentials:n}),o={commandToRun:P,credentials:n},r={FunctionName:W,Payload:JSON.stringify(o)},console.log("Invoking CLI Lambda with params:",r),l(!0),g(!1),O(!1),F(void 0),a.invoke(r,(function(e,t){if(e){var n="Failed to invoke AWS CLI proxy Lambda: ".concat(e.name);console.log(n),p(n),g(!0),F(void 0),l(!1)}else{var a=JSON.parse(t.Payload);console.log("AWS CLI Proxy Lambda response:",a),F(a.commandResult),g(!1),O(!0)}l(!1)}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return W||console.log("Error: params.functionName parameter was not provided for AWS CLI Proxy widget"),o.a.createElement(V,null,o.a.createElement("h2",null,"AWS CLI Proxy"),o.a.createElement(I.a,{id:"standard-basic",label:"AWS CLI Command",value:P,onChange:function(e){return x(e.target.value)},fullWidth:!0}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(C.a,{variant:"contained",onClick:function(){return T.apply(this,arguments)}},"Run command!"),o.a.createElement("br",null),o.a.createElement("br",null),y?o.a.createElement(I.a,{id:"awsCliResponseTextField",label:"CLI response",multiline:!0,fullWidth:!0,rowsMax:30,style:{whiteSpace:"pre-line"},value:L}):null,c?"Waiting for response from Lambda CLI proxy...":null,u?f:null)},ge=Object(l.b)((function(){console.log("authState = ".concat(b.cognito.authState));var e=b.cognito.loggedIn;return o.a.createElement(o.a.Fragment,null,e?o.a.createElement(me,null):o.a.createElement(de,null))})),de=Object(l.b)((function(){var e=E();return o.a.createElement("main",{className:e.content},o.a.createElement(X,{displayType:"login",updateAuthState:b.cognito.updateAuthState}),o.a.createElement(z,null))})),me=Object(l.b)((function(){var e=E(),t=[{component:Y,displayName:"Cognito Info",id:"cognito-info",displayOnFirstLoad:!1},{component:le,displayName:"EC2 Instances",id:"ec2-instances",displayOnFirstLoad:!1},{component:ue,displayName:"Serverless AWS CLI",id:"serverless-cli",displayOnFirstLoad:!0,params:{functionName:_.awsCliFunctionName}}],n=t.map((function(e){return e.displayOnFirstLoad})),r=Object(a.useState)(n),c=Object(v.a)(r,2),l=c[0],i=c[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(fe,{widgets:t,handleToggle:function(e){console.log("handle toggle is: ",e);var t=Object(F.a)(l);!1===t[e]?t[e]=!0:t[e]=!1,i(t)},checkboxState:l}),o.a.createElement("main",{className:e.content},o.a.createElement(u.a,null),t.map((function(e,t){return!0===l[t]?o.a.createElement(e.component,{key:e.id,params:e.params||{}}):null})),o.a.createElement(z,null)))})),fe=Object(l.b)((function(e){var t=e.widgets,n=e.handleToggle,a=e.checkboxState,r=E();return o.a.createElement(o.a.Fragment,null,o.a.createElement(W.a,{className:r.drawer,variant:"persistent",open:!0,classes:{paper:r.drawerPaper}},o.a.createElement(u.a,null),o.a.createElement(M.a,{className:r.drawerHeaderContainer},o.a.createElement(D.a,{m:1},o.a.createElement(g.a,{variant:"h6"},"Widgets"))),o.a.createElement("div",{className:r.drawerContainer},o.a.createElement(T.a,null,t.map((function(e,t){var r="checkbox-list-label-".concat(e.id);return o.a.createElement(B.a,{key:e.id,dense:!0,button:!0,onClick:function(){return n(t)}},o.a.createElement(H.a,null,o.a.createElement(J.a,{edge:"start",checked:a[t],tabIndex:-1,disableRipple:!0,key:"checkbox-".concat(e.id),inputProps:{"aria-labelledby":r}})),o.a.createElement(U.a,{key:r,primary:e.displayName}))}))),o.a.createElement(R.a,null))))})),pe=ge;var be=Object(l.b)((function(){var e=E();return o.a.createElement("div",{className:e.root},o.a.createElement(i.a,null),o.a.createElement(L,null),o.a.createElement(pe,null))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[248,1,2]]]);
//# sourceMappingURL=main.41e9b38a.chunk.js.map